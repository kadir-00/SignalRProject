@model List<ResultBasketDtos>
@{
	Layout = null;
	int count = 0;
	decimal baskeTotalPrice=0;
	decimal baskeTotalPriceWithTax=0;
	decimal tax = 0;
}

<!DOCTYPE html>
<html>
@await Component.InvokeAsync("_UILayoutHeadComponentPartial")
<body class="sub_page">
	@await Component.InvokeAsync("_MenuNavbarComponentPartial")
	<br />
	<br />
	<div class="container-fluid">
		<div class="row px-xl-5">
			<div class="col-12">
				<nav class="breadcrumb bg-dark mb-30">
					<a class="breadcrumb-item text-white" href="/Default/Index">Ana Sayfa</a>
					<a class="breadcrumb-item text-white" href="/Menu/Index">Menü</a>
					<span class="breadcrumb-item active">Sepetiniz</span>
				</nav>
			</div>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row px-xl-5">
			<div class="col-lg-8 table-responsive mb-5">
				<table class="table table-light table-borderless table-hover text-center mb-0">
					<thead class="thead-dark">
						<tr>
							<th>#</th>
							<th>Ürün Adı</th>
							<th>Adet</th>
							<th>Fiyat</th>
							<th>Toplam</th>
							<th>Sil</th>
						</tr>
					</thead>
					@foreach (var item in Model)
					{
						baskeTotalPrice = Model.Sum(x => x.Price);
						tax = baskeTotalPrice / 100 * 10;
						baskeTotalPriceWithTax =  (baskeTotalPrice + tax);
						count++;
						<tbody class="align-middle">
							<tr>
								<td class="align-middle">@count</td>
								<td class="align-middle">@item.ProductName</td>
								<td class="align-middle">@item.Count</td>
								<td class="align-middle">@item.Price</td>
								<td class="align-middle">@item.TotalPrice</td>
								<td class="align-middle btn-delete">
									<a 
										 class="btn btn-sm btn-danger" href="/Baskets/DeleteBasket/@item.BasketId">
										<i class="fa fa-timers"></i>
									</a>
								</td>
							</tr>
						</tbody>
					}
				</table>
			</div>
			<div class="col-log-4">
				<form>
					<div class="input-group">
						<input type="text" id="couponcode" class="form-control border-2 p-4" placeholder="Kupon Kodunuz" />
						<div>
							<a style="height:48px;padding-top:11px;" class="btn btn-warning" id="btncouponcod"> Kuponu Uygula </a>
						</div>
					</div>
				</form>
				<br />
				<h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-warning pr-3">Sepeti Ozeti</span></h5>
				<div class="bg-light p-30 m-0">
					<div id="container" class="border-bottom pb-0">
						<div class="d-flex justify-content-between mb-1">
							<h6>Toplam Tutar</h6>
							<h6> <span id="totalprice">@baskeTotalPrice</span>TL</h6>
						</div>
					</div>
					<div id="container" class="border-bottom pb-2">
						<div class="d-flex justify-content-between">
							<h6 class="font-weight-medium">KDV Orani</h6>
							<h6> <span id="kdv" class="font-weight-medium">@tax</span>TL</h6>
						</div>
					</div>
					<br />
				</div>
				<div class="pt-2">
					<div class="d-flex justify-content-between mt-0">
						<h5>Toplam Tutar</h5>
						<h5> <span id="totalprice">@baskeTotalPriceWithTax</span>TL</h5>
					</div>
					
					<button id="btnchecked" class="btn btn-block btn-warning font-weight-bold my-3"> Siparisi Tamamla</button>
				</div>
			</div>
		</div>
	</div>
	@* < !--end food section -->
	< !--footer section-- > *@
			@await Component.InvokeAsync("_UILayoutFooterComponentPartial")
	@* < !--footer section-- >
	< !--jQery-- > *@
					@await Component.InvokeAsync("_UILayoutScriptsComponentPartial")
</body>
</html>

